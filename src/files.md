# फ़ाइलें और आपके संग्रह का प्रबंधन

<!-- toc -->

## अपने संग्रह की जाँच करना

कभी-कभी अपनी संग्रह फ़ाइल को समस्याओं के लिए जाँचना एक अच्छा विचार है। आप इसे Tools>Check Database मेनू आइटम के माध्यम से कर सकते हैं। डेटाबेस की जाँच यह सुनिश्चित करती है कि फ़ाइल दूषित नहीं हुई है, कुछ आंतरिक संरचनाओं का पुनर्निर्माण करती है, और फ़ाइल को अनुकूलित करती है।

जब आप डेटाबेस की जाँच करते हैं, तो आपकी टैग सूची भी पुनर्निर्मित हो जाती है। जब आप अलग-अलग डेक या कार्ड हटाते हैं, तो Anki उपयोग किए गए टैग की सूची को अपडेट नहीं करता है, क्योंकि ऐसा करना अक्षम है। यदि आप सूची से पुराने टैग साफ़ करना चाहते हैं जो अब उपयोग में नहीं हैं, तो अपने डेटाबेस की जाँच करना ऐसा करने का तरीका है।

कृपया ध्यान दें कि Anki हर 2 सप्ताह में एक बार आपके संग्रह को स्वचालित रूप से अनुकूलित करेगा। यह अनुकूलन सुनिश्चित करता है कि संग्रह अच्छा प्रदर्शन करता है, लेकिन यह त्रुटियों के लिए जाँच नहीं करता है या स्वचालित रूप से अनुकूलित करते समय टैग सूची का पुनर्निर्माण नहीं करता है।

<a id="file-locations"></a>

## उपयोगकर्ता डेटा

**विंडोज** पर, नवीनतम Anki संस्करण आपकी संग्रह फ़ाइलों को आपके appdata फ़ोल्डर में संग्रहीत करते हैं। आप फ़ाइल प्रबंधक खोलकर और स्थान फ़ील्ड में `%APPDATA%\Anki2` टाइप करके इसे एक्सेस कर सकते हैं। Anki के पुराने संस्करणों ने आपकी Anki फ़ाइलों को आपके `Documents` फ़ोल्डर में `Anki` नामक फ़ोल्डर में संग्रहीत किया था।

**मैक** कंप्यूटरों पर, हाल के Anki संस्करण सभी उपयोगकर्ता डेटा को `~/Library/Application Support/Anki2` फ़ोल्डर में संग्रहीत करते हैं। लाइब्रेरी फ़ोल्डर डिफ़ॉल्ट रूप से छिपा होता है, लेकिन फाइंडर में Go मेनू पर क्लिक करते समय विकल्प कुंजी दबाकर इसे प्रकट किया जा सकता है। यदि आप पुराने Anki संस्करण पर हैं, तो आपकी Anki फाइलें आपके `Documents/Anki` फ़ोल्डर में होंगी।

**लिनक्स** पर, हाल के Anki संस्करण आपके उपयोगकर्ता डेटा को `~/.local/share/Anki2`, या `$XDG_DATA_HOME/Anki2` में संग्रहीत करते हैं यदि आपने एक कस्टम डेटा पथ सेट किया है। यदि आप किसी तृतीय-पक्ष **फ्लैटपैक** बिल्ड का उपयोग कर रहे हैं, तो आपकी फाइलें `~/.var/app/net.ankiweb.Anki/data/Anki2/` में होंगी। Anki के पुराने संस्करणों ने आपकी फ़ाइलों को `~/Documents/Anki` या `~/Anki` में संग्रहीत किया था।

Anki फ़ोल्डर के भीतर, प्रोग्राम-स्तरीय और प्रोफ़ाइल-स्तरीय वरीयताएँ `prefs.db` नामक फ़ाइल में संग्रहीत होती हैं।

प्रत्येक प्रोफ़ाइल के लिए एक अलग फ़ोल्डर भी है। फ़ोल्डर में शामिल हैं:

- `collection.anki2` नामक फ़ाइल में आपके नोट्स, डेक, कार्ड और इसी तरह की चीजें

- `collection.media` फ़ोल्डर में आपका ऑडियो और चित्र

- एक बैकअप फ़ोल्डर

- कुछ सिस्टम फाइलें

जब Anki खुला हो तो आपको कभी भी अपने संग्रह की प्रतिलिपि नहीं बनानी चाहिए या उसे स्थानांतरित नहीं करना चाहिए। ऐसा करने से आपका संग्रह दूषित हो सकता है। कृपया फ़ोल्डर में अन्य फ़ाइलों को भी स्थानांतरित या संशोधित न करें।

## प्रोग्राम फ़ाइलें

Anki का लॉन्चर डिफ़ॉल्ट रूप से निम्नलिखित स्थानों पर स्थापित है:

-विंडोज: `%LOCALAPPDATA%\Programs\Anki`
- macOS: `/Applications/Anki.app`
- लिनक्स: `/usr/local/share/anki`

जब आप लॉन्चर के साथ Anki स्थापित/अपडेट करते हैं, तो यह समर्थन फ़ाइलों को डाउनलोड करता है और उन्हें निम्नलिखित स्थानों पर रखता है:

-विंडोज: `%LOCALAPPDATA%\AnkiProgramFiles`
- macOS: `~/Library/Application Support/AnkiProgramFiles`
- लिनक्स: `~/.local/share/AnkiProgramFiles`

उस फ़ोल्डर को हटाने से लॉन्चर एक नए इंस्टॉल की तरह व्यवहार करेगा।

`AnkiProgramFiles` में लॉन्चर के अलावा Anki चलाने के लिए आवश्यक सभी फाइलें हैं। आप इसे एक अलग फ़ोल्डर या सिस्टम में कॉपी कर सकते हैं, और `AnkiProgramFiles/.venv/bin/anki` (या विंडोज पर `AnkiProgramFiles\.venv\scripts\anki`) खोलकर नए स्थान से Anki शुरू कर सकते हैं। यदि एक नए कंप्यूटर पर मानक स्थान पर रखा जाता है, तो लॉन्चर मौजूदा फ़ाइलों का पुन: उपयोग करने में भी सक्षम होगा, बशर्ते फ़ाइलों को संशोधन समय संरक्षित के साथ कॉपी किया गया हो।

अधिक जानकारी के लिए नीचे फ्लैश ड्राइव अनुभाग देखें।

## स्टार्टअप विकल्प

यदि आपने एक कंप्यूटर पर एक विनाशकारी परिवर्तन किया है और दूसरे कंप्यूटर पर एक अक्षतिग्रस्त प्रतिलिपि है, तो आप परिवर्तनों को पहले डाउनलोड किए बिना पूर्ण सिंक विकल्प का उपयोग करने के लिए सिंकिंग के बिना Anki शुरू करना चाह सकते हैं। इसी तरह, यदि आप Anki के साथ समस्याओं का सामना कर रहे हैं, तो आपको यह देखने के लिए कि क्या कोई समस्या पैदा कर रहा है, अस्थायी रूप से ऐड-ऑन को अक्षम करने की आवश्यकता हो सकती है (या निर्देश दिया जा सकता है)। इन दोनों चीजों को एक ही समय में करने के लिए, आप Anki शुरू करते समय <kbd>Shift</kbd> कुंजी दबाकर Anki को सुरक्षित मोड में खोल सकते हैं। <kbd>Shift</kbd> को तब तक दबाए रखें जब तक कि ऑन-स्क्रीन संदेश आपको यह सूचित न करे कि Anki सुरक्षित मोड में शुरू हो गया है। यदि आप लिनक्स पर हैं और यह काम नहीं किया, तो 'anki --safemode' चलाएँ।

स्टार्टअप के दौरान एक कस्टम फ़ोल्डर स्थान निर्दिष्ट करना संभव है। यह एक उन्नत सुविधा है जो मुख्य रूप से पोर्टेबल इंस्टॉलेशन के साथ उपयोग करने के लिए है, और हम अनुशंसा करते हैं कि आप अधिकांश परिस्थितियों में डिफ़ॉल्ट स्थान का उपयोग करें।

एक वैकल्पिक फ़ोल्डर निर्दिष्ट करने के लिए सिंटैक्स इस प्रकार है:

    anki -b /path/to/anki/folder

- यदि आपके पास कई प्रोफ़ाइल हैं, तो आप एक विशिष्ट प्रोफ़ाइल लोड करने के लिए -p <name> पास कर सकते हैं।
- यदि आप -p some-fake-name पास करते हैं, तो Anki स्टार्टअप पर प्रोफ़ाइल स्क्रीन दिखाएगा। यदि कोई प्रोफ़ाइल प्रदान नहीं की जाती है, तो अंतिम-उपयोग की गई प्रोफ़ाइल लोड हो जाती है।

- इंटरफ़ेस भाषा बदलने के लिए, -l <iso 639-1 भाषा कोड> का उपयोग करें, जैसे जापानी के लिए "-l ja"।

यदि आप हमेशा एक कस्टम फ़ोल्डर स्थान का उपयोग करना चाहते हैं, तो आप Anki के लिए अपना शॉर्टकट संशोधित कर सकते हैं। विंडोज पर, शॉर्टकट पर राइट-क्लिक करें, गुण चुनें, शॉर्टकट टैब चुनें, और प्रोग्राम के पथ के बाद "-b \\path\\to\\data\\folder" जोड़ें, जो आपको कुछ इस तरह छोड़ देगा

    "C:\Program Files\Anki\anki.exe" -b "C:\AnkiDataFolder"

आप विभिन्न भाषाओं में आसानी से Anki का उपयोग करने के लिए -l विकल्प के साथ इस तकनीक का उपयोग भी कर सकते हैं।

मैक पर Anki आइकन पर क्लिक करते समय व्यवहार को बदलने का कोई आसान तरीका नहीं है, लेकिन एक टर्मिनल से कस्टम बेस फ़ोल्डर के साथ Anki शुरू करना संभव है:

    open /Applications/Anki.app --args -b ~/myankifolder

वैकल्पिक रूप से, आप पर्यावरण चर "ANKI_BASE" को परिभाषित कर सकते हैं। विंडोज पर, आप पर्यावरण चर को इसके साथ परिभाषित कर सकते हैं:

    set "ANKI_BASE=C:/path/to/AnkiDataFolder"

लिनक्स और macOS पर, आप इसका उपयोग कर सकते हैं:

    export ANKI_BASE="/path/to/AnkiDataFolder"

## ड्रॉपबॉक्स और फ़ाइल सिंकिंग

हम अनुशंसा नहीं करते हैं कि आप अपने Anki फ़ोल्डर को सीधे किसी तृतीय-पक्ष सिंक्रनाइज़ेशन सेवा के साथ सिंक करें, क्योंकि उपयोग में होने पर फ़ाइलों को सिंक करने पर यह डेटाबेस भ्रष्टाचार का कारण बन सकता है।

यदि आप केवल अपने मीडिया को सिंक्रनाइज़ करना चाहते हैं, तो आप बाहरी फ़ोल्डरों को ड्रॉपबॉक्स जैसी सेवाओं से लिंक कर सकते हैं। अधिक जानकारी के लिए कृपया [ड्रॉपबॉक्सविकि: ड्रॉपबॉक्स के बाहर फ़ोल्डर्स सिंक करें (archive.org)][dropboxwiki-sync-other] देखें।

[dropboxwiki-sync-other]: http://web.archive.org/web/20180919153730/http://www.dropboxwiki.com/tips-and-tricks/sync-other-folders

यदि आप अपने संग्रह को भी सिंक में रखना चाहते हैं, तो यह दृढ़ता से अनुशंसा की जाती है कि आप एक स्क्रिप्ट बनाएं जो आपकी फ़ाइलों को आपके सिंक किए गए फ़ोल्डर से एक स्थानीय फ़ोल्डर में कॉपी करती है, Anki लॉन्च करती है, और फिर Anki बंद होने पर फ़ाइलों को वापस कॉपी करती है। यह सुनिश्चित करेगा कि फ़ाइलें कभी भी खुली होने पर सिंक्रनाइज़ न हों।

## नेटवर्क फ़ाइलसिस्टम

हम दृढ़ता से अनुशंसा करते हैं कि आप Anki को अपनी फ़ाइलों को एक स्थानीय हार्ड डिस्क पर संग्रहीत करने दें, क्योंकि नेटवर्क फ़ाइलसिस्टम डेटाबेस भ्रष्टाचार का कारण बन सकते हैं। यदि एक नेटवर्क फ़ाइलसिस्टम आपका एकमात्र विकल्प है, तो भ्रष्टाचार का पता लगाने के लिए Tools>Check Database का नियमित उपयोग अनुशंसित है।

## फ्लैश ड्राइव से चलाना

विंडोज पर, Anki को एक USB / फ्लैश ड्राइव पर स्थापित किया जा सकता है और एक पोर्टेबल एप्लिकेशन के रूप में चलाया जा सकता है। निम्नलिखित उदाहरण मानता है कि आपका USB ड्राइव ड्राइव E है; आवश्यकतानुसार समायोजित करें।

चेतावनी: ड्राइव अक्षर सभी उपकरणों पर समान होना चाहिए। यदि आप इसे ड्राइव E के लिए सेट करते हैं, तो यह उदाहरण के लिए ड्राइव D पर मैप किए गए फ्लैश ड्राइव के लिए काम नहीं करेगा।

चेतावनी: यदि आपका फ्लैश ड्राइव FAT32 के रूप में स्वरूपित है तो AnkiWeb के साथ मीडिया सिंकिंग काम नहीं कर सकती है। कृपया यह सुनिश्चित करने के लिए ड्राइव को NTFS के रूप में स्वरूपित करें कि मीडिया सही ढंग से सिंक हो।

1. नवीनतम Anki लॉन्चर डाउनलोड करें, और इसे एक कस्टम स्थान पर स्थापित करें: `E:\Anki\Launcher`। `E:\Anki\Launcher\Anki` नहीं।
2. जब लॉन्चर दिखाई दे, तो इसे स्थापित किए बिना बंद कर दें।
3. निम्नलिखित को `E:\Anki\Anki.bat` नामक फ़ाइल में डालें:

```bat
@echo off
echo Anki शुरू हो रहा है...
set USB_ROOT=%~dp0
set ANKI_LAUNCHER_VENV_ROOT=%USB_ROOT%\AnkiProgramFiles
set ANKI_LAUNCHER=%USB_ROOT%\Launcher\anki
set ANKI_BASE=%USB_ROOT%\AnkiData
start /b %ANKI_LAUNCHER%
```

4. आपके द्वारा बनाई गई .bat फ़ाइल पर डबल-क्लिक करें, और Anki को सामान्य रूप से स्थापित करें।
5. अब आप अन्य मशीनों से Anki चलाने के लिए .bat फ़ाइल पर डबल-क्लिक कर सकते हैं।

Tools>Upgrade/Downgrade कार्य करना जारी रखेगा, लेकिन केवल तभी जब आपकी मशीन में इंटरनेट का उपयोग हो।

## बैकअप

कृपया [इस अनुभाग](./backups.md) को देखें।

## दुर्गम हार्डडिस्क

यदि Anki [Anki फ़ोल्डर](#user-data) में फ़ाइलों को नहीं लिख सकता है, तो स्टार्टअप पर एक संदेश प्रदर्शित होगा जिसमें कहा जाएगा कि Anki हार्डडिस्क पर नहीं लिख सकता है, और Anki बंद हो जाएगा। यदि आप सुनिश्चित नहीं हैं कि अनुमतियों को कैसे ठीक किया जाए, तो कृपया अपने आस-पास किसी ऐसे व्यक्ति से संपर्क करें जो कंप्यूटर के बारे में जानकार हो और आपकी मदद कर सके।

## अस्थायी फ़ोल्डर की अनुमतियाँ

Anki अस्थायी डेटा संग्रहीत करने के लिए सिस्टम के अस्थायी फ़ोल्डर का उपयोग करता है। यदि इस फ़ोल्डर की अनुमतियों को एक दुष्ट ऐप या बग्गी एंटीवायरस ऐप द्वारा डिफ़ॉल्ट सेटिंग्स से बदल दिया गया है, तो Anki ठीक से काम नहीं करेगा।

यदि आप विंडोज 7 मशीन पर हैं, तो समस्या को ठीक करने के सामान्य चरण नीचे सूचीबद्ध हैं। चूंकि यह कुछ हद तक जटिल है, यदि आप सुनिश्चित नहीं हैं तो कृपया विंडोज के बारे में जानकार किसी से पूछें।

1. स्टार्ट बार पर क्लिक करें, और %temp% (प्रतिशत सहित) टाइप करें, फिर <kbd>Enter</kbd> दबाएं।

2. एक फ़ोल्डर ऊपर जाएं, और अस्थायी फ़ोल्डर का पता लगाएं। उस पर राइट क्लिक करें, और गुण चुनें।

3. सुरक्षा टैब में, उन्नत पर क्लिक करें।

4. मालिक टैब पर क्लिक करें। यदि आप मालिक के रूप में सूचीबद्ध नहीं हैं, तो स्वामित्व लेने के लिए बटन पर क्लिक करें।

5. अनुमतियाँ टैब पर, सुनिश्चित करें कि आपके पास पूर्ण नियंत्रण है। एक डिफ़ॉल्ट W7 इंस्टॉल पर नियंत्रण वास्तव में c:\users\your-username से विरासत में मिलेगा।

## दूषित संग्रह

Anki एक फ़ाइल प्रारूप का उपयोग करता है जो प्रोग्राम और कंप्यूटर क्रैश के खिलाफ मजबूत है, लेकिन यदि Anki खुला होने पर फ़ाइलों को संशोधित किया जाता है, नेटवर्क ड्राइव पर संग्रहीत किया जाता है, या किसी बग द्वारा दूषित किया जाता है, तो भी आपका संग्रह दूषित हो सकता है।

जब आप Tools>Check Database चलाते हैं, तो यदि Anki को पता चलता है कि फ़ाइल दूषित हो गई है तो आपको एक संदेश प्राप्त होगा। **इससे उबरने का सबसे अच्छा तरीका सबसे हाल के [स्वचालित बैकअप](#backups) से पुनर्स्थापित करना है**, लेकिन यदि आपका बैकअप बहुत पुराना है, तो आप इसके बजाय भ्रष्टाचार की मरम्मत का प्रयास कर सकते हैं।

लिनक्स पर, सुनिश्चित करें कि sqlite3 स्थापित है। मैक पर, यह पहले से ही स्थापित होना चाहिए। विंडोज पर, <http://www.sqlite.org/sqlite-3_6_23.zip> डाउनलोड करें।

इसके बाद, अपनी collection.anki2 फ़ाइल का एक बैकअप बनाएँ, यदि नीचे दिए गए चरणों में कुछ गलत हो जाता है।

### लिनक्स/macOS

एक टर्मिनल खोलें, उस फ़ोल्डर में बदलें जहाँ आपका संग्रह स्थित है, और टाइप करें:

    sqlite3 collection.anki2 .dump > dump.txt

परिणामी dump.txt फ़ाइल को एक पाठ संपादक में खोलें, और अंतिम पंक्ति को देखें। यदि यह "rollback;" पढ़ता है, तो इसे "commit;" में बदल दें।

फिर एक टर्मिनल में निम्नलिखित चलाएँ:

    cat dump.txt | sqlite3 temp.file

सुनिश्चित करें कि आप temp.file का उपयोग करते हैं - दाईं ओर collection.anki2 न डालें, अन्यथा आप फ़ाइल को खाली कर देंगे। जब आप कर लें, तो अंतिम चरण पर आगे बढ़ें।

### विंडोज

`sqlite3.exe` प्रोग्राम और अपने डेक को अपने डेस्कटॉप पर कॉपी करें। फिर **Start>Run** पर जाएं और `cmd.exe` टाइप करें।

यदि आप हाल के विंडोज पर हैं, तो कमांड प्रॉम्प्ट आपके डेस्कटॉप पर शुरू नहीं हो सकता है। यदि आप कमांड प्रॉम्प्ट में डेस्कटॉप प्रदर्शित नहीं देखते हैं, तो "administrator" को अपने लॉगिन नाम से प्रतिस्थापित करते हुए, कुछ इस तरह टाइप करें।

    cd C:\Users\Administrator\Desktop

फिर टाइप करें:

    sqlite3 collection.anki2 .dump > dump.txt

परिणामी dump.txt फ़ाइल को एक पाठ संपादक में खोलें, और अंतिम पंक्ति को देखें। यदि यह "rollback;" पढ़ता है, तो इसे "commit;" में बदल दें।

फिर एक टर्मिनल में निम्नलिखित चलाएँ:

    type dump.txt | sqlite3 temp.file

सुनिश्चित करें कि आप temp.file का उपयोग करते हैं - दाईं ओर collection.anki2 न डालें, अन्यथा आप फ़ाइल को खाली कर देंगे। जब आप कर लें, तो अंतिम चरण पर आगे बढ़ें।

### अंतिम चरण

जांचें कि आपको कोई त्रुटि संदेश नहीं मिला है, और यह कि temp.file खाली नहीं है। यह प्रक्रिया प्रक्रिया में संग्रह को अनुकूलित करती है, इसलिए नई फ़ाइल के लिए पुरानी फ़ाइल से कुछ छोटा होना सामान्य है।

जब आप पुष्टि कर लें कि फ़ाइल खाली नहीं है:

- मूल collection.anki2 फ़ाइल का नाम कुछ और रखें

- temp.file का नाम बदलकर collection.anki2 करें

- collection.anki2 को अपने संग्रह फ़ोल्डर में वापस ले जाएं, पुराने संस्करण को अधिलेखित करते हुए

- Anki शुरू करें और Tools>Check Database पर जाएं ताकि यह सुनिश्चित हो सके कि संग्रह सफलतापूर्वक बहाल हो गया है।