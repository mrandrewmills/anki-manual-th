# ไฟล์ข้อความ

<!-- toc -->

ไฟล์ **ข้อความธรรมดา** ใดๆ ที่มีฟิลด์คั่นด้วยเครื่องหมายจุลภาค, เซมิโคลอน หรือแท็บ สามารถนำเข้าใน Anki ได้ หากตรงตามเงื่อนไขบางประการ

- ไฟล์ต้องเป็นข้อความธรรมดา (myfile.txt) รูปแบบอื่นเช่น myfile.xls, myfile.rtf, myfile.doc ต้องบันทึกเป็นไฟล์ข้อความธรรมดาก่อน

- ไฟล์ต้องอยู่ในรูปแบบ UTF-8 (ดูด้านล่าง)

- Anki จะตรวจสอบจำนวนฟิลด์ในไฟล์โดยดูจากบรรทัดแรก (ที่ไม่ใช่คอมเมนต์) หากบางเรคคอร์ดในไฟล์มีฟิลด์น้อยกว่า Anki จะถือว่าฟิลด์ที่ขาดเป็นค่าว่าง หากบางเรคคอร์ดมีฟิลด์เกิน เนื้อหาส่วนเกินจะไม่ถูกนำเข้า

- Anki จะพยายามเดาว่าไฟล์ของคุณใช้ตัวคั่นฟิลด์แบบใด (จุลภาค, แท็บ ฯลฯ) หากเดาผิด คุณสามารถเปลี่ยนได้ในหน้าต่างตัวเลือกนำเข้าและดูตัวอย่างผลลัพธ์ หรือเพิ่ม [ส่วนหัวไฟล์](#file-headers) เพื่อบังคับใช้ตัวคั่นฟิลด์ที่ต้องการ

ฟิลด์ในไฟล์ข้อความของคุณสามารถจับคู่กับฟิลด์ใดก็ได้ในโน้ต รวมถึงฟิลด์แท็กด้วย คุณสามารถเลือกว่าฟิลด์ใดในไฟล์จะตรงกับฟิลด์ใดในโน้ตขณะนำเข้า

เมื่อคุณนำเข้าไฟล์ข้อความ คุณสามารถเลือกเด็คที่จะใส่บัตรได้ โปรดทราบว่าหากคุณตั้งค่าตัวเลือกเด็คแทนที่ไว้ในเทมเพลตหนึ่งหรือมากกว่า บัตรจะไปที่เด็คนั้นแทนที่จะเป็นเด็คที่คุณเลือก

ตัวอย่างไฟล์ที่ถูกต้องที่มีสามฟิลด์:

    apple;banana;grape
    first field;second field;third field

มีสองวิธีในการใส่บรรทัดใหม่หรือเครื่องหมายคั่นฟิลด์ในฟิลด์

**ใส่เครื่องหมายอัญประกาศรอบเนื้อหาฟิลด์เพื่อ escape ตัวอักษรพิเศษ**:

    hello;"this is
    a two line answer"
    two;this is a one line field
    "this includes a ; (semicolon)";another field

เนื่องจากเครื่องหมายอัญประกาศใช้ระบุจุดเริ่มและจบของฟิลด์ หากต้องการใส่เครื่องหมายอัญประกาศในฟิลด์ ให้ใช้เครื่องหมายอัญประกาศสองครั้งติดกันเพื่อ escape เช่น:

    field one;"field two with ""escaped quotes"" inside it"

หากคุณใช้โปรแกรมสเปรดชีตอย่าง Libreoffice เพื่อสร้างไฟล์ CSV โปรแกรมจะจัดการ escape เครื่องหมายอัญประกาศให้อัตโนมัติ

**ใช้ HTML new lines**:

    hello; this is<br>a two line answer
    two; this is a one line one

คุณต้องเปิดใช้งาน **Allow HTML in fields** ในหน้าต่างนำเข้าเพื่อให้ HTML newlines ใช้งานได้

การ escape หลายบรรทัดจะไม่ทำงานถูกต้องหากคุณใช้ cloze deletion ที่ข้ามหลายบรรทัด ในกรณีนี้โปรดใช้ HTML newline แทน

คุณยังสามารถใส่แท็กในฟิลด์อื่นและเลือกเป็นฟิลด์แท็กในหน้าต่างนำเข้าได้:

    first field;second field;tags

ตัวอย่างไฟล์ที่ถูกต้องซึ่งบรรทัดแรกถูกละเว้น (\#):

    # this is a comment and is ignored
    foo bar;bar baz;baz quux
    field1;field2;field3

## สเปรดชีตและ UTF-8

หากไฟล์ของคุณมีอักขระที่ไม่ใช่ละติน (เช่น ตัวอักษรมีวรรณยุกต์, ญี่ปุ่น ฯลฯ) Anki คาดว่าไฟล์จะถูกบันทึกเป็น "UTF-8 encoding" วิธีที่ง่ายที่สุดคือใช้โปรแกรม LibreOffice แทน Excel ในการแก้ไขไฟล์ เพราะรองรับ UTF-8 ได้ดี และยังส่งออกเนื้อหาหลายบรรทัดได้ถูกต้อง ต่างจาก Excel หากต้องการใช้ Excel ต่อ โปรดดู [เอกสารนี้](https://docs.google.com/document/d/12YE_FS6A9ANLTESJNtPP116ti4nNmCBghyoJBRtno_k/edit?usp=sharing) สำหรับข้อมูลเพิ่มเติม

ในการบันทึกสเปรดชีตเป็นไฟล์ที่ Anki อ่านได้ด้วย LibreOffice ให้ไปที่ **ไฟล์ &gt; บันทึกเป็น** แล้วเลือก CSV เป็นประเภทไฟล์ หลังจากยอมรับตัวเลือกเริ่มต้น LibreOffice จะบันทึกไฟล์และคุณสามารถนำเข้าไฟล์นั้นใน Anki ได้

## HTML

Anki สามารถจัดการข้อความที่นำเข้าจากไฟล์ข้อความเป็น HTML (ภาษาสำหรับเว็บเพจ) ได้ ซึ่งหมายความว่าข้อความที่มีตัวหนา ตัวเอียง และรูปแบบอื่นๆ สามารถส่งออกเป็นไฟล์ข้อความและนำเข้ากลับมาได้ หากต้องการใส่รูปแบบ HTML ให้เลือก "อนุญาต HTML ในฟิลด์" ขณะนำเข้า คุณอาจต้องปิดตัวเลือกนี้หากต้องการนำเข้าบัตรที่มีเนื้อหาประกอบด้วยเครื่องหมาย < หรือสัญลักษณ์ HTML อื่นๆ

หากต้องการใช้ HTML เพื่อจัดรูปแบบไฟล์แต่ต้องการใส่เครื่องหมาย < หรือ & ด้วย ให้ใช้การแทนที่ดังนี้:

| ตัวอักษร | การแทนที่ |
| -------- | --------- |
| &lt;     | `&lt;`    |
| &gt;     | `&gt;`    |
| &amp;    | `&amp;`   |

## การนำเข้าสื่อ

หากต้องการใส่เสียงหรือรูปภาพจากไฟล์ข้อความ ให้นำไฟล์ไปไว้ใน [โฟลเดอร์ collection.media](../files.md) **ห้ามใส่โฟลเดอร์ย่อยในโฟลเดอร์สื่อ มิฉะนั้นฟีเจอร์บางอย่างจะไม่ทำงาน**

หลังจากคัดลอกไฟล์แล้ว ให้เปลี่ยนฟิลด์ในไฟล์ข้อความของคุณดังนี้

    <img src="myimage.jpg">

หรือ

    [sound:myaudio.mp3]

หรือจะใช้ฟีเจอร์ [ค้นหาและแทนที่](../browsing.md) ในหน้าจอเบราว์เซอร์เพื่ออัปเดตฟิลด์ทั้งหมดพร้อมกันก็ได้ หากแต่ละฟิลด์มีข้อความเช่น "myaudio" และคุณต้องการให้เล่นเสียง ให้ค้นหา (.\*) และแทนที่ด้วย "\[sound:\\1.mp3\]" โดยเปิดใช้งานตัวเลือก **regular expressions**

ขณะนำเข้าไฟล์ข้อความที่มีการอ้างอิงเหล่านี้ ต้องแน่ใจว่าเปิดใช้งาน "Allow HTML" ด้วย

คุณอาจอยากทำแบบนี้ในเทมเพลต เช่น

    <img src="{{field name}}">

Anki ไม่รองรับด้วยสองเหตุผล: การค้นหาสื่อที่ใช้จะช้า เพราะต้องเรนเดอร์บัตรแต่ละใบ และฟีเจอร์นี้ไม่ชัดเจนสำหรับผู้ใช้เด็คที่แชร์ โปรดใช้เทคนิคค้นหาและแทนที่แทน

## การนำเข้าสื่อจำนวนมาก

อีกทางเลือกสำหรับการนำเข้าสื่อจำนวนมากในครั้งเดียวคือใช้ [ปลั๊กอิน media import](https://ankiweb.net/shared/info/129299120) ปลั๊กอินนี้จะสร้างโน้ตอัตโนมัติสำหรับไฟล์ทั้งหมดในโฟลเดอร์ที่คุณเลือก โดยชื่อไฟล์จะอยู่ด้านหน้า (ไม่รวมสกุลไฟล์ เช่น apple.jpg จะได้ "apple" ด้านหน้า) และรูปภาพหรือเสียงจะอยู่ด้านหลัง หากต้องการจัดเรียงสื่อและชื่อไฟล์แบบอื่น สามารถ [เปลี่ยนประเภทโน้ต](../browsing.md) ของบัตรที่สร้างขึ้นภายหลังได้

## การซ้ำและการอัปเดต

ขณะนำเข้าไฟล์ข้อความ Anki จะใช้ฟิลด์แรกเพื่อตรวจสอบว่าโน้ตนั้นซ้ำหรือไม่ โดยปกติ หากไฟล์ที่นำเข้ามีฟิลด์แรกตรงกับโน้ตที่มีอยู่ในคลังของคุณและเป็นประเภทโน้ตเดียวกัน โน้ตที่มีอยู่จะถูกอัปเดตฟิลด์อื่นๆ ตามเนื้อหาในไฟล์ที่นำเข้า กล่องเลือกในหน้าต่างนำเข้าช่วยให้คุณเปลี่ยนพฤติกรรมนี้ได้ว่าจะไม่สนใจโน้ตซ้ำเลย หรือให้นำเข้าเป็นโน้ตใหม่แทนการอัปเดตโน้ตเดิม

การตั้งค่า **ขอบเขตการจับคู่** จะควบคุมวิธีระบุโน้ตซ้ำ เมื่อเลือก **note type** Anki จะระบุว่าเป็นโน้ตซ้ำหากมีโน้ตประเภทเดียวกันที่มีฟิลด์แรกเหมือนกัน เมื่อเลือก **note type and deck** จะถือว่าเป็นโน้ตซ้ำก็ต่อเมื่อโน้ตที่มีอยู่ก็อยู่ในเด็คเดียวกับที่คุณนำเข้า

หากเปิดใช้งานการอัปเดตและมีโน้ตเวอร์ชันเก่าอยู่ในคลัง โน้ตเหล่านั้นจะถูกอัปเดตในตำแหน่งเดิม (ในเด็คปัจจุบัน) แทนที่จะถูกย้ายไปเด็คที่คุณตั้งไว้ในหน้าต่างนำเข้า หากโน้ตถูกอัปเดตในตำแหน่งเดิม ข้อมูลการตั้งเวลาทบทวนเดิมของบัตรทั้งหมดจะยังคงอยู่

สำหรับข้อมูลเกี่ยวกับการจัดการโน้ตซ้ำในไฟล์ .apkg โปรดดูหัวข้อ [Deck Packages](../exporting.md#packaged-decks)

## ส่วนหัวไฟล์

Anki 2.1.54+ รองรับส่วนหัวบางอย่างที่สามารถใส่ในไฟล์ข้อความเพื่อให้การนำเข้าทรงพลังหรือสะดวกขึ้น ส่วนหัวเหล่านี้เป็นคู่ `#key:value` และต้องอยู่ในบรรทัดแยกที่ด้านบนของไฟล์

| คีย์              | ค่าที่อนุญาต                                                               | พฤติกรรม                                                                                     |
| ----------------- | -------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- |
| `separator`       | `Comma`, `Semicolon`, `Tab`, `Space`, `Pipe`, `Colon` หรืออักขระที่ต้องการ | กำหนดตัวคั่นฟิลด์                                                                            |
| `html`            | `true`, `false`                                                            | กำหนดว่าไฟล์จะถูกจัดการเป็น HTML หรือไม่                                                     |
| `tags`            | รายการแท็ก คั่นด้วยช่องว่าง                                                | เพิ่มแท็กที่ระบุให้กับโน้ตที่นำเข้าทุกใบ                                                     |
| `columns`         | รายชื่อคอลัมน์ คั่นด้วยตัวคั่นที่ตั้งไว้ก่อนหน้า                           | กำหนดจำนวนคอลัมน์และแสดงชื่อขณะนำเข้า                                                        |
| `notetype`        | ชื่อหรือรหัสประเภทโน้ต                                                     | กำหนดประเภทโน้ตล่วงหน้า หากมีอยู่                                                            |
| `deck`            | ชื่อหรือรหัสเด็ค                                                           | กำหนดเด็คล่วงหน้า หากมีอยู่                                                                  |
| `notetype column` | `1`, `2`, `3`, ...                                                         | กำหนดว่าคอลัมน์ใดมีชื่อหรือรหัสประเภทโน้ตของแต่ละโน้ต ดู [Notetype Column](#notetype-column) |
| `deck column`     | `1`, `2`, `3`, ...                                                         | กำหนดว่าคอลัมน์ใดมีชื่อหรือรหัสเด็คของแต่ละโน้ต ดู [Deck Column](#deck-column)               |
| `tags column`     | `1`, `2`, `3`, ...                                                         | กำหนดว่าคอลัมน์ใดมีแท็กของแต่ละโน้ต                                                          |
| `guid column`     | `1`, `2`, `3`, ...                                                         | กำหนดว่าคอลัมน์ใดมี GUID ของแต่ละโน้ต ดู [GUID Column](#guid-column)                         |

ส่วนหัวบางอย่างมีรายละเอียดเพิ่มเติมดังนี้

### Notetype Column

โดยปกติ โน้ตทั้งหมดจากไฟล์จะถูกจับคู่กับประเภทโน้ตเดียว แต่หากมีคอลัมน์ที่มีชื่อหรือรหัสประเภทโน้ต จะสามารถนำเข้าโน้ตที่มีประเภทโน้ตต่างกันได้ และฟิลด์จะถูกจับคู่อัตโนมัติ: คอลัมน์ปกติแรกจะใช้เป็นฟิลด์แรกของโน้ตทุกประเภท คอลัมน์ปกติที่สองเป็นฟิลด์ที่สอง ฯลฯ  
_คอลัมน์ปกติ_ หมายถึงคอลัมน์ที่ไม่ใช่ข้อมูลพิเศษ เช่น เด็ค แท็ก ประเภทโน้ต หรือ GUID

### Deck Column

โดยปกติบัตรใหม่ที่สร้างจากการนำเข้าไฟล์ข้อความจะถูกวางในเด็คเดียวที่คุณเลือก แต่หากไฟล์มีคอลัมน์เด็ค บัตรใหม่ของโน้ตจะถูกวางในเด็คที่ระบุ หากเด็คไม่มีอยู่ จะสร้างเด็คใหม่ตามชื่อที่ระบุ

### GUID Column

GUID หมายถึง _Globally Unique Identifier_ เมื่อคุณสร้างโน้ตใน Anki, Anki จะกำหนดรหัสเฉพาะให้แต่ละโน้ต ซึ่งใช้สำหรับตรวจสอบโน้ตซ้ำ หากคุณส่งออกโน้ตพร้อม GUID คุณสามารถแก้ไขโน้ตและนำเข้ากลับมาได้โดยไม่เปลี่ยน GUID ฟิลด์

โปรดทราบว่า GUID ควรสร้างโดย Anki หากคุณสร้างรหัสเอง เช่น `MYNOTE0001` แนะนำให้ใส่รหัสในฟิลด์แรกแทนที่จะใช้ GUID ภายในของ Anki ขณะนำเข้า Anki สามารถใช้ฟิลด์แรกหรือ GUID เพื่อตรวจสอบโน้ตซ้ำได้ ดังนั้นไม่จำเป็นต้องทำให้รหัสเป็น GUID เพื่ออัปเดตโน้ต

อีกประเด็นหนึ่งคือ
