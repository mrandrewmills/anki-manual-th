# การติดตั้งและอัปเกรด Anki บน Linux

<!-- toc -->

## ข้อกำหนด

เวอร์ชันที่จัดทำเป็นแพ็กเกจต้องการ Linux 64 บิตสำหรับ Intel/AMD รุ่นล่าสุดที่มี glibc 2.36+ และไลบรารีทั่วไป
เช่น libwayland-client และ systemd หากคุณใช้สถาปัตยกรรมอื่น
(เช่น ARM/AArch64) หรือ Linux distro แบบ barebones คุณจะไม่สามารถใช้เวอร์ชันที่จัดทำเป็นแพ็กเกจได้
แต่คุณอาจสามารถใช้ [Python wheels](https://betas.ankiweb.net/#via-pypipip)
แทนได้

สำหรับ Debian และอนุพันธ์ เช่น Ubuntu และ [Chromebooks ที่เปิดใช้งาน Linux](https://support.google.com/chromebook/answer/9145439?) โปรดใช้คำสั่งต่อไปนี้ก่อน
การติดตั้ง:

```shell
sudo apt install libxcb-xinerama0 libxcb-cursor0 libnss3
```

หาก Anki ไม่สามารถเริ่มทำงานได้หลังจากการติดตั้ง คุณอาจ [ขาดไลบรารีอื่น ๆ](./missing-libraries.md)

หากคุณใช้ Ubuntu 24.04 และ Anki ไม่เริ่มทำงาน โปรดดู [กระทู้นี้](https://forums.ankiweb.net/t/issues-running-on-ubuntu-24-04/40974)

ระบบบิลด์ของ Anki รองรับเฉพาะ glibc ดังนั้น distro ที่ใช้ musl จึงไม่รองรับในขณะนี้

## การติดตั้ง

ในการติดตั้ง Anki:

1. ดาวน์โหลด Anki จาก <https://apps.ankiweb.net> ไปยังโฟลเดอร์ดาวน์โหลดของคุณ
2. หากยังไม่ได้ติดตั้ง zstd บนระบบของคุณ คุณจะต้องติดตั้ง (เช่น `sudo apt install zstd`)
3. เปิดเทอร์มินัลและเรียกใช้คำสั่งต่อไปนี้ โดยแทนที่ชื่อไฟล์ตามความเหมาะสม

```shell
tar xaf Downloads/anki-2XXX-linux-qt6.tar.zst
cd anki-2XXX-linux-qt6
sudo ./install.sh
```

ในบางระบบ Linux คุณอาจต้องใช้ `tar xaf --use-compress-program=unzstd`

4. จากนั้นคุณสามารถเริ่ม Anki ได้โดยพิมพ์ `anki` แล้วกด <kbd>Enter</kbd> หากคุณพบ
   ปัญหาใด ๆ โปรดดูลิงก์ทางด้านซ้าย

## การอัปเกรด

หากคุณเคยใช้ Anki จาก .deb/.rpm/etc มาก่อน โปรดตรวจสอบให้แน่ใจว่า
ได้ลบเวอร์ชันของระบบออกก่อนที่จะติดตั้งแพ็กเกจ
ที่ให้ไว้ที่นี่

หากคุณกำลังอัปเกรดจากแพ็กเกจก่อนหน้า เพียงทำซ้ำขั้นตอน
การติดตั้งเพื่ออัปเกรดเป็นเวอร์ชันล่าสุด ข้อมูลผู้ใช้ของคุณ
จะถูกเก็บรักษาไว้

หากคุณต้องการดาวน์เกรดเป็นเวอร์ชันก่อนหน้า โปรดตรวจสอบให้แน่ใจว่าคุณ
[ดาวน์เกรดก่อน](http://changes.ankiweb.net)

## ความเข้ากันได้ของส่วนเสริม

ส่วนเสริมบางตัวอาจไม่ทำงานกับ Anki รุ่นล่าสุดเสมอไป หากคุณอัปเกรดเป็น
Anki เวอร์ชันล่าสุดและพบว่าส่วนเสริมที่คุณขาดไม่ได้หยุดทำงาน
คุณสามารถดาวน์โหลด Anki เวอร์ชันเก่าได้จาก [หน้าเผยแพร่](https://github.com/ankitects/anki/releases)

## เวอร์ชัน Qt ของระบบ

ตัวเรียกใช้งานของ Anki ใช้บิลด์ PyQt อย่างเป็นทางการเป็นค่าเริ่มต้น ซึ่งจะทำให้ง่ายต่อการ
ติดตั้ง Anki บน distro ที่ไม่มีเวอร์ชัน Python/Qt ที่เกี่ยวข้อง แต่หมายความว่า
คุณอาจไม่สามารถเข้าถึงคุณสมบัติบางอย่างของ Qt ที่ Linux distro ของคุณมีให้ เช่น
ธีม Qt บางอย่าง การรองรับวิธีการป้อนข้อมูล FCITX เป็นต้น

หาก Linux distro ของคุณมีแพ็กเกจ Anki ที่ทันสมัย คุณอาจพบว่าการใช้งานนั้นง่ายที่สุด

หากไม่มี ผู้ใช้ขั้นสูงอาจต้องการรวมตัวเรียกใช้งานของ Anki เข้ากับเวอร์ชัน Qt ของระบบ
ในการทำเช่นนี้ ระบบของคุณต้องมีเวอร์ชัน Python ที่ Anki รองรับ (เร็ว ๆ นี้จะเป็น 3.11+)
และไลบรารี PyQt ที่เหมาะสม (6.2+)

คำเตือน: นี่เป็นคุณสมบัติทดลอง และ Qt ของระบบของคุณอาจแก้ไขข้อบกพร่องบางอย่างในขณะที่
แนะนำข้อบกพร่องอื่น ๆ

1. ติดตั้ง Python และแพ็กเกจ PyQt ที่เกี่ยวข้อง บน Ubuntu:

   > sudo apt install python3-pyqt6.qtwebengine

1. หากคุณเคยใช้ตัวเรียกใช้งานมาก่อน `rm -rf ~/.local/share/AnkiProgramFiles`

1. แตกไฟล์ตัวเรียกใช้งาน และ cd ไปยังโฟลเดอร์ของมัน

1. เรียกใช้ `touch system_qt` เพื่อสร้างไฟล์ system_qt ในโฟลเดอร์นั้น

1. ติดตั้ง Anki ผ่าน ./anki หรือ ./install.sh ในรายการแพ็กเกจที่ติดตั้ง
   คุณไม่ควรเห็นการกล่าวถึง PyQt6 ใด ๆ

## ปัญหา

หากคุณพบปัญหาใด ๆ ในระหว่างการติดตั้งหรือเริ่ม Anki โปรดดู
หน้าต่อไปนี้:

- [ไลบรารีที่ขาดหายไป](missing-libraries.md)
- [ปัญหาการแสดงผล](display-issues.md)
- [หน้าต่างหลักว่างเปล่า](blank-window.md)
- [แพ็คเกจ Linux Distro](distro-packages.md)
- [ธีม GTK ไม่ถูกต้อง](gtk-theme.md)
- [Wayland](wayland.md)
- [วิธีการป้อนข้อมูล](input-methods.md)
